# 项目进度与经验沉淀

## 最近更新
*2026-02-20*

---

## 已解决的问题

### 1. 数据库连接超时
**问题**：生产环境频繁出现数据库连接超时。

**原因**：连接池配置过小，高并发时连接不够用。

**解决方案**：
```python
# 调整连接池大小
SQLALCHEMY_POOL_SIZE = 20
SQLALCHEMY_MAX_OVERFLOW = 10
```

**经验教训**：生产环境的连接池配置要比开发环境大得多。

---

### 2. 前端打包体积过大
**问题**：首页加载时间超过 5 秒。

**原因**：未做代码分割，所有依赖打包在一起。

**解决方案**：
```javascript
// 使用动态导入
const UserModule = () => import('./modules/User');
```

**经验教训**：大型应用必须做代码分割和懒加载。

---

## 架构演进

### v1.0 → v1.1 (2026-02-15)
- 从单体架构拆分为前后端分离
- 引入 Redis 缓存层
- 数据库从 SQLite 迁移到 PostgreSQL

### v1.1 → v1.2 (2026-02-20)
- 添加 Celery 异步任务队列
- 实现 API 限流机制
- 优化数据库索引

---

## 重复错误记录

### ❌ 不要再犯

1. **忘记添加数据库索引**
   - 症状：查询慢
   - 检查：`EXPLAIN ANALYZE` 查看执行计划

2. **前端未做错误边界处理**
   - 症状：一个组件报错导致整个页面崩溃
   - 解决：使用 ErrorBoundary

3. **API 未做参数校验**
   - 症状：非法输入导致服务器错误
   - 解决：使用 Pydantic/Joi 等校验库

---

## 技术债务

- [ ] 用户模块代码需要重构（过于复杂）
- [ ] 缺少集成测试
- [ ] 日志系统需要统一规范

---

## 下一步计划

1. 实现微服务架构
2. 添加监控和告警系统
3. 优化前端性能
